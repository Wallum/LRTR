//
//excluded parts
//
//kerbals don't resize
@PART[kerbalEVA*]:BEFORE[zLRTR]
{
	MODULE
	{
	    name = ModuleTagNotRescaled
	}
}

//
//game balance fixes
//
//first cockpit shouldn't be space capable
@PART[Mark1Cockpit]:FIRST
{
	!MODULE[ModuleReactionWheel] {} //removing it here so Kerbalism doesn't add reliablity module
}
@PART[Mark1Cockpit]:NEEDS[!ProfileLRTR] 
{
    //I prefer just removing oxygen, this is the fallback.
    MODULE
    {
        name = ModuleUnpressurizedCockpit
    }
}
@PART[Mark1Cockpit]:FINAL
{
	!RESOURCE[MonoPropellant] {}
    !RESOURCE[Oxygen] {}
}
//capsules that do not allow EVA
@PART[Mark1Cockpit|Mark2Cockpit|mk1pod_v2|kv1Pod|kv3Pod]:BEFORE[zLRTR]
{
	MODULE
	{
	    name = ModuleNoEVA
	}
}
//RS-25 family too powerful, this brings them more in line with the real SSME
@PART[SSME|Size2LFB|Size3EngineCluster|restock-engine-boar]:BEFORE[zLRTR]
{
	@MODULE[ModuleEngines*]
	{
		@maxThrust *= 0.6
	}
}
//make tiny supplies tanks radial mountable
@PART[kerbalism-container-inline-0625]:FOR[zLRTR]
{
	@attachRules = 1,1,1,1,0
}
//make fairings clamshell deployment
@PART[*]:HAS[@MODULE[ModuleProceduralFairing]]:FOR[zLRTR]
{
	@MODULE[ModuleProceduralFairing]
	{
		%nArcs 			= 2 	
		%ejectionForce 	= 650
		%useClamshell 	= True
	}
}

//
//rather than just boosting thrust linearly, this creates a curve to make powerful engines even more powerful
//this helps create closer to real world values for stock engines
//equation:  (maxThrust / (maxThrust + X) + 1) * maxThrust * 2.56
//gives 1-2 multiplier as maxThrust increases with X determaining the steepness of curve
//actual thrust adjustment done in lrtr_resize.cfg
//
//default
@PART[*]:HAS[@MODULE[ModuleEngines*],!MODULE[ModuleTagNotRescaled]]:BEFORE[zLRTR]:NEEDS[!SMURFF|!RealismOverhaul]
{
	%lrtr_thrustCurve = 600    
}
//parts that get more adjustment
@PART[_your_mod_here_]:HAS[@MODULE[ModuleEngines*],!MODULE[ModuleTagNotRescaled]]:BEFORE[zLRTR]:NEEDS[!SMURFF|!RealismOverhaul]
{
	%lrtr_thrustCurve = 400    
}
//parts that do not need much adjustment
@PART[bluedog_*]:HAS[@MODULE[ModuleEngines*],!MODULE[ModuleTagNotRescaled]]:BEFORE[zLRTR]:NEEDS[!SMURFF|!RealismOverhaul]
{
	%lrtr_thrustCurve = 1800    
}
//parts that have no thrust adjustments
@PART[FASA*]:HAS[@MODULE[ModuleEngines*],!MODULE[ModuleTagNotRescaled]]:BEFORE[zLRTR]:NEEDS[!SMURFF|!RealismOverhaul]
{
	!lrtr_thrustCurve = DEL
}

//
//LRTR mod add-ons
//
// Add range safety
@PART[*]:HAS[@MODULE[ModuleCommand],#CrewCapacity[0]]:AFTER[LRTR]
{
	MODULE
	{
		name = ModuleRangeSafety
	}
}

//
//bug fixes
//
//liquidEngine3_v2 has two rescaleFactor entries as of 1.7.3
@PART[liquidEngine3_v2]:BEFORE[zLRTR]:NEEDS[!SMURFF|!RealismOverhaul]
{
    -rescaleFactor = 1.0
    rescaleFactor = 1.0
}

//won't resize normally as of 1.7.3.  not sure what's going wrong, this fixes it
@PART[MEMLander]:BEFORE[zLRTR]:NEEDS[!SMURFF|!RealismOverhaul]
{
    @rescaleFactor = 1.6
}

//breaking ground robotic parts glitch in VAB when resized as of 1.8.1
@PART[*]:HAS[@MODULE[ModuleRobotic*]]:BEFORE[zLRTR]
{
	MODULE
	{
	    name = ModuleTagNotRescaled
	}
}

//
//mod fixes
//
//Restock launch clamps don't rescale well.  Uses lrtr.restockwhitelist as well.
@PART[launchClamp1]:NEEDS[ReStock]:BEFORE[ReStock]
{
	RestockIgnore = True
}
//FASA parts missing a complete set of DRAG_CUBE keys
@PART[FASAProbeParachute]:BEFORE[zLRTR]:NEEDS[!SMURFF|!RealismOverhaul]
{
    !DRAG_CUBE {}
    DRAG_CUBE
	{
		cube = PACKED, 0.0494743, 0.7919335, 0.0494743, 0.771063, 0.1814466, 0.9421492, 0.1814466, 0.8953546, 0.04153702, 0.7587959, 0.04153702, 0.7699606,0,0,0,0,0,0,0,0,0,0,0,0
		cube = SEMIDEPLOYED, 3.320982, 3.788866, 3.320982, 3.781338, 1.194608, 3.729646, 1.194608, 3.98544, 3.312711, 3.695515, 3.312711, 3.735461,0,0,0,0,0,0,0,0,0,0,0,0
		cube = DEPLOYED, 13.04796, 13.86658, 13.04269, 13.86419, 19.08469, 25.80871, 19.08508, 28.3229, 13.03741, 13.36273, 13.03741, 13.79391,0,0,0,0,0,0,0,0,0,0,0,0
	}
}
@PART[WingGemini]:BEFORE[zLRTR]:NEEDS[!SMURFF|!RealismOverhaul]
{
    !DRAG_CUBE {}
	DRAG_CUBE
	{
		cube = Default, 0.008417127,1,1.31361, 0.008417127,1,1.31361, 0.07052688,1,0.4886493, 0.07052688,0.02231601,0.1475529, 0.3151167,0.9988997,0.2585402, 0.3151167,0.9993948,0.2585402,0,0,0,0,0,0
	}
}
//MechJeb
@PART[mumech_MJ2_AR202|mumech_MJ2_Pod]:NEEDS[!RealismOverhaul]
{
    @MODULE[MechJebCore]
        !MechJebLocalSettings {}
		MechJebLocalSettings {
			MechJebModuleCustomWindowEditor { unlockTechs = basicAvionics }
			MechJebModuleSmartASS { unlockTechs = basicAvionics }
			MechJebModuleManeuverPlanner { unlockTechs = improvedAvionics }
			MechJebModuleNodeEditor { unlockTechs = improvedAvionics }
			MechJebModuleTranslatron { unlockTechs = improvedAvionics }
			MechJebModuleWarpHelper { unlockTechs = improvedAvionics }
			MechJebModuleAttitudeAdjustment { unlockTechs = improvedAvionics }
			MechJebModuleThrustWindow { unlockTechs = improvedAvionics }
			MechJebModuleRCSBalancerWindow { unlockTechs = improvedAvionics }
			MechJebModuleRoverWindow { unlockTechs = advancedAvionics }
			MechJebModuleAscentGuidance { unlockTechs = longTermAvionics }
			MechJebModuleLandingGuidance { unlockTechs = longTermAvionics }
			MechJebModuleSpaceplaneGuidance { unlockTechs = longTermAvionics }
			MechJebModuleDockingGuidance { unlockTechs = internationalAvionics }
			MechJebModuleRendezvousAutopilotWindow { unlockTechs = internationalAvionics }
			MechJebModuleRendezvousGuidance { unlockTechs = internationalAvionics }
		}
	}
}
//SimpleAdjustableFairings don't resize correctly
@PART[*]:HAS[@MODULE[ModuleSimpleAdjustableFairing]]:NEEDS[!RealismOverhaul]:BEFORE[zLRTR]
{
	MODULE
	{
		name = ModuleTagNotRescaled
	}
}