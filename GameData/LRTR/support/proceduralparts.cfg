//
//ProceduralParts fixes
//
@PART[*]:HAS[@MODULE[ProceduralPart]]:BEFORE[zLRTR]
{
	MODULE
	{
		name = ModuleTagNotRescaled
	}
}

@PART[proceduralTankLiquid]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{
    @MODULE[ProceduralShapeCone]
    {
        %techRequired = materialsScienceHuman
    }
    @MODULE[ProceduralShapePill]
    {
        %techRequired = materialsScienceAdvCapsules
    }
    @MODULE[ProceduralShapeBezierCone]
    {
        %techRequired = materialsScienceAdvCapsules
    }
        
    @MODULE[ProceduralPart]
    {
        -TECHLIMIT,* {}
        
        diameterMin = 1.0
        lengthMin = 0.5
        volumeMin = 1.0
        
        TECHLIMIT
        {
            name = postWarMaterialsScience
            diameterMax = 1.5
            lengthMax = Infinity
            volumeMax = Infinity
        }
        TECHLIMIT
        {
            name = earlyMaterialsScience
            diameterMin = 0.5
            lengthMin = 0.3
            volumeMin = 0.2
        }
        TECHLIMIT
        {
            name = materialsScienceSatellite
            diameterMax = 1.875
        }
        TECHLIMIT
        {
            name = materialsScienceAdvCapsules
            diameterMax = 2.5
        }
        TECHLIMIT
        {
            name = materialsScienceLunar
            diameterMax = 3.5
        }
        TECHLIMIT
        {
            name = materialsScienceSpaceStation
            diameterMax = 5
        }
        TECHLIMIT
        {
            name = materialsScienceSpaceplanes
            diameterMax = Infinity
        }
    }
}

@PART[proceduralStructural]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{
    @MODULE[ProceduralShapeCone]
    {
        %techRequired = materialsScienceHuman
    }
    @MODULE[ProceduralShapePill]
    {
        %techRequired = materialsScienceAdvCapsules
    }
    @MODULE[ProceduralShapeBezierCone]
    {
        %techRequired = materialsScienceAdvCapsules
    }
        
    @MODULE[ProceduralPart]
    {
        -TECHLIMIT,* {}
        
        diameterMin = 0.125
        lengthMin = 0.5
        
        TECHLIMIT
        {
            name = postWarMaterialsScience
            diameterMax = 1.25
            lengthMax = Infinity
            volumeMax = Infinity
        }
        TECHLIMIT
        {
            name = earlyMaterialsScience
            lengthMin = 0.3
        }
        TECHLIMIT
        {
            name = materialsScienceSatellite
            diameterMax = 1.875
        }
        TECHLIMIT
        {
            name = materialsScienceAdvCapsules
            diameterMax = 2.5
        }
        TECHLIMIT
        {
            name = materialsScienceLunar
            diameterMax = 3.5
        }
        TECHLIMIT
        {
            name = materialsScienceSpaceStation
            diameterMax = 5
        }
        TECHLIMIT
        {
            name = materialsScienceSpaceplanes
            diameterMax = Infinity
        }
    }
}

@PART[proceduralTankOre]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{
    @MODULE[ProceduralShapeCone]
    {
        %techRequired = materialsScienceHuman
    }
    @MODULE[ProceduralShapePill]
    {
        %techRequired = materialsScienceAdvCapsules
    }
    @MODULE[ProceduralShapeBezierCone]
    {
        %techRequired = materialsScienceAdvCapsules
    }
        
    @MODULE[ProceduralPart]
    {
        -TECHLIMIT,* {}
        
        diameterMin = 0.1
        lengthMin = 0.1
        volumeMin = 1.0
        
        TECHLIMIT
        {
            name = lifeSupportISRU
            diameterMax = 1.5
            lengthMax = 1.75
            volumeMax = 2.5
        }
        TECHLIMIT
        {
            name = improvedLifeSupport
            diameterMax = 3.5
            lengthMax = 5.0
            volumeMax = 15.0
        }
        TECHLIMIT
        {
            name = advancedLifeSupport
			name = metaMaterials
			diameterMin = 0.01
			diameterMax = Infinity
			lengthMin = 0.01
			lengthMax = Infinity
			volumeMin = 0.01
			volumeMax = Infinity
        }
    }
}

@PART[proceduralTankRCS]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{
    @MODULE[ProceduralShapeCone]
    {
        %techRequired = materialsScienceHuman
    }
    @MODULE[ProceduralShapePill]
    {
        %techRequired = materialsScienceAdvCapsules
    }
    @MODULE[ProceduralShapeBezierCone]
    {
        %techRequired = materialsScienceAdvCapsules
    }
        
    @MODULE[ProceduralPart]
    {
        -TECHLIMIT,* {}
        
        diameterMin = 0.5
        lengthMin = 0.3
        volumeMin = 0.11
        
        TECHLIMIT
        {
            name = materialsScienceAdvCapsules
            diameterMax = 2.5
            lengthMax = 2.0
            volumeMax = 5.0
        }
        TECHLIMIT
        {
            name = materialsScienceSpaceStation
			diameterMin = 0.01
			diameterMax = Infinity
			lengthMin = 0.01
			lengthMax = Infinity
			volumeMin = 0.01
			volumeMax = Infinity
        }
    }
}

@PART[proceduralTankXenon]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{
    @MODULE[ProceduralShapeCone]
    {
        %techRequired = materialsScienceHuman
    }
    @MODULE[ProceduralShapePill]
    {
        %techRequired = materialsScienceAdvCapsules
    }
    @MODULE[ProceduralShapeBezierCone]
    {
        %techRequired = materialsScienceAdvCapsules
    }
        
    @MODULE[ProceduralPart]
    {
        -TECHLIMIT,* {}
        
        diameterMin = 0.125
        diameterMax = 0.75
        lengthMin = 0.1
        lengthMax = 0.75
        volumeMin = 0.02
        volumeMax = 0.2
        
        TECHLIMIT
        {
            name = advancedElecPropulsion
			diameterMin = 0.01
			diameterMax = Infinity
			lengthMin = 0.01
			lengthMax = Infinity
			volumeMin = 0.01
			volumeMax = Infinity
        }
    }
}

@PART[proceduralBattery]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{ 
    @MODULE[ProceduralShapeCone]
    {
        %techRequired = electronicsHuman
    }
    @MODULE[ProceduralShapePill]
    {
        %techRequired = electronicsAdvCapsules
    }
    @MODULE[ProceduralShapeBezierCone]
    {
        %techRequired = electronicsAdvCapsules
    }
        
    @MODULE[ProceduralPart]
    {
        -TECHLIMIT,* {}
        
        TECHLIMIT
        {
            name = electronicsSatellite
            diameterMax = 0.5
            lengthMax = 1.0
            volumeMax = 0.05
        }
        TECHLIMIT
        {
            name = electronicsHuman
            diameterMax = 1.25
            volumeMax = 0.08
        }
        TECHLIMIT
        {
            name = electronicsLunar
            diameterMax = 1.875
            volumeMax = 0.16
        }
        TECHLIMIT
        {
            name = electronicsSpaceStation
            diameterMax = 2.5
            volumeMax = 1.5
            maxLength = 1.25
        }
        TECHLIMIT
        {
            name = spaceStationSolarPanels
            diameterMin = 0.01
            diameterMax = Infinity
            lengthMin = 0.01
            lengthMax = Infinity
            volumeMin = 0.001
            volumeMax = Infinity
        }
    }
}

@PART[proceduralNoseCone]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{         
    @MODULE[ProceduralPart]
    {
        -TECHLIMIT,* {}
        
        TECHLIMIT
        {
            name = supersonicFlightRP0
            diameterMin = 0.125
            diameterMax = 1.25
            lengthMin = 0.625
            lengthMax = 0.625
        }
        TECHLIMIT
        {
            name = hypersonicFlightRP0
            lengthMax = 1.5
        }
        TECHLIMIT
        {
            name = prototypeSpaceplanes
            diameterMax = 2.5
        }
        TECHLIMIT
        {
            name = effectiveSpaceplanes
            diameterMin = 0.01
            diameterMax = Infinity
        }
    }
}

@PART[proceduralHeatshield]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{
         
    @MODULE[ProceduralPart]
    {
        -TECHLIMIT,* {}
        
        TECHLIMIT
        {
            name = humanRatedEDL
            diameterMin = 0.5
            diameterMax = 1.25
        }
        TECHLIMIT
        {
            name = earlyLanding
            diameterMax = 2.5
        }
        TECHLIMIT
        {
            name = lunarRatedHeatshields
            diameterMax = 3.5
        }
		TECHLIMIT 
		{
			name = advancedLanding
			diameterMin = 0.01
			diameterMax = Infinity
			lengthMin = 0.1
			lengthMax = Infinity
			volumeMin = 0.01
			volumeMax = Infinity
		}
    }
}

@PART[proceduralTankSRB]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{

    @MODULE[ProceduralShapeCone]
    {
        %techRequired = materialsScienceHuman
    }
    @MODULE[ProceduralShapePill]
    {
        %techRequired = materialsScienceAdvCapsules
    }
    @MODULE[ProceduralShapeBezierCone]
    {
        %techRequired = materialsScienceAdvCapsules
    }

    @MODULE[ProceduralPart]
    {
        -TECHLIMIT,* {}
 		
 		%volumeMax = Infinity
 		
        TECHLIMIT
        {
			name = basicSolids
			diameterMin = 0.5
			diameterMax = 0.5
			lengthMin = 1.0
			lengthMax = 1.25
			volumeMin = 1.0
        }
        TECHLIMIT
        {
            name = solids1956
            diameterMax = 1.25
        }
        TECHLIMIT
        {
            name = solids1958
            lengthMax = 6.0
            VolumeMin = 0.5
        }
        TECHLIMIT
        {
            name = solids1962
            lengthMax = 14.0
        }
        TECHLIMIT
        {
            name = solids1964
            diameterMax = 1.875
        }
        TECHLIMIT
        {
            name = solids1969
            diameterMax = 2.5
        }
		TECHLIMIT 
		{
			name = solids1972
			diameterMin = 0.01
			diameterMax = Infinity
			lengthMin = 0.1
			lengthMax = Infinity
			volumeMin = 0.01
		}
    }
}

@PART[proceduralStackDecoupler]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{
    @MODULE[ProceduralPart]
    {
        -TECHLIMIT,* {}
        
        TECHLIMIT
        {
            name = earlyMaterialsScience
            diameterMin = 0.5
            diameterMax = 1.25
        }
        TECHLIMIT
        {
            name = materialsScienceHuman
            diameterMax = 1.875
        }
        TECHLIMIT
        {
            name = materialsScienceAdvCapsules
            diameterMax = 2.5
        }
        TECHLIMIT
        {
            name = materialsScienceAdvCapsules
            diameterMax = 2.5
        }
        TECHLIMIT
        {
            name = materialsScienceLunar
            diameterMax = 3.5
        }
        TECHLIMIT
        {
            name = materialsScienceSpaceStation
            diameterMax = 5.0
        }
        TECHLIMIT
        {
            name = materialsScienceSpaceplanes
            diameterMax = Infinity
        }
    }
    MODULE[DecouplerTweaker]
    {
        %separatorTechRequired = materialsScienceHuman
    }
}

@PART[*]:HAS[@MODULE[ProceduralPart]]:NEEDS[LRTRRescale]:BEFORE[zLRTR]
{
    @MODULE[TankContentSwitcher]
    {
        @TANK_TYPE_OPTION,*
        {
            @dryDensity *= 0.8
            @RESOURCE[SolidFuel]
            {
                @unitsPerT *= 1.6
            }
            @RESOURCE[MonoPropellant]
            {
                @unitsPerT *= 0.45
            }
        }
    }
    @MODULE[ProceduralPart]
    {
        @diameterMin *= 1.6
        @diameterMax *= 1.6
        @lengthMin *= 1.6
        @lengthMax *= 1.6
        @volumeMin *= 3.6
        @volumeMax *= 3.6

        @TECHLIMIT,*
        {
            @diameterMin *= 1.6
            @diameterMax *= 1.6
            @lengthMin *= 1.6
            @lengthMax *= 1.6
            @volumeMin *= 3.6
            @volumeMax *= 3.6
        }        
    }
    @MODULE[ProceduralSRB]
    {
        @thrust1m *= 2.56
    }
}
