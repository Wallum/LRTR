//Originally from RP-1 v1.1.1 
//https://github.com/KSP-RO/RP-0
//Used under Creative Commons License

// Add unlimited avionics to all command modules and disable hibernation
@PART[*]:HAS[@MODULE[ModuleCommand]]:FINAL
{
	@MODULE[ModuleCommand],*
	{
		%hasHibernation = False
	}
	MODULE
	{
		name = ModuleAvionics
	}

}

// Disable attitude control on non-control parts.
@PART[*]:HAS[@MODULE[ModuleCommand]:HAS[~minimumCrew[>0]],!MODULE[ModuleAvionics],!MODULE[ModuleProceduralAvionics],!MODULE[ModuleScienceCore]]:AFTER[LRTR]
{
	MODULE
	{
		name = ModuleScienceCore
	}
}


// Add ability to turn off avionics to crewed parts
// RP0.dll will only let them be turned off if they're currently empty
@PART[*]:HAS[#CrewCapacity[*],~CrewCapacity[0]]:AFTER[LRTR]
{
	@MODULE[ModuleAvionics]
	{
		%toggleable = true
		%disabledkW = 0.1
	}
}